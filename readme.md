# poslog.store 사용 가이드\n\n## API 요약\n- 엔드포인트: `https://poslog.store`\n- POST `/api/logs`: 로그 전송 { level, label, message, context?, source?, timestamp? }\n- GET `/api/logs`: 필터/검색/페이징\n- DELETE `/api/logs/:id`: 단건 삭제\n- 데이터 모델: level, label, message, context, timestamp, source (id/created_at은 서버 생성)\n- CORS: 전체 허용, JSON body 제한 1MB\n\n## JS/TS 클라이언트 사용법 (`helpers/logger.js`)\nNode/브라우저 공용 헬퍼입니다.\n```js\n// Node 18+ 네이티브 fetch 사용. (Node 18 미만은 node-fetch 설치 필요)\nconst { sendLog } = require('./helpers/logger');\n\nsendLog({\n  level: 'INFO',\n  label: 'my-plugin',\n  message: '주문 생성 완료',\n  context: { orderId: 123, amount: 9900 },\n  source: 'node-app'\n})\n  .then((res) => console.log('logged', res))\n  .catch(console.error);\n```\n필드 설명:\n- `level` (필수): INFO | WARN | ERROR | DEBUG 등\n- `label` (필수): 서비스/플러그인 식별자\n- `message` (필수): 로그 메시지\n- `context` (선택): 객체/문자열\n- `source` (선택): 소스 식별자\n- `timestamp` (선택): ISO 문자열(미지정 시 서버가 채움)\n- 엔드포인트 변경: `sendLog({...}, 'https://custom/api/logs')`\n\n## PHP 클라이언트 사용법 (`helpers/logger.php`)\n```php\n<?php\nrequire_once __DIR__ . '/helpers/logger.php';\n\nsend_log(\n    'INFO',           // level\n    'my-plugin',      // label\n    '주문 생성 완료',   // message\n    ['orderId' => 123, 'amount' => 9900], // context\n    'php-app'         // source (optional)\n);\n?>\n```\n- 엔드포인트 변경: 마지막 인자로 `send_log(..., $endpoint)` 전달\n\n## UI 접근\n- 웹 대시보드: `https://poslog.store` (React + Tailwind + TanStack Query)\n- 기능: 필터(level/label/source/기간/검색), 자동/수동 새로고침, 자동 스크롤, 단건 삭제, 로그 복사, 컨텍스트 코드 하이라이트\n\n## 서버/운영\n- 서비스: `external-logger.service` (systemd), 포트 6666 -> nginx 프록시(80/443)\n- DB: `/opt/external-logger/logs/logs.db` (SQLite)\n- 환경변수 예: `server/.env.example`\n\n## 테스트 예시 (curl)\n```bash\ncurl -XPOST https://poslog.store/api/logs \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"level\":\"INFO\",\"label\":\"demo\",\"message\":\"hello\",\"context\":{\"foo\":\"bar\"},\"source\":\"curl\"}'\n\ncurl \"https://poslog.store/api/logs?level=INFO&limit=10\"\n```*** End Patch
